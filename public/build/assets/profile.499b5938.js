import{f as g,g as l,m as w,h as x,_ as b,S as y,r as _,o as P,e as C,a as e,w as s,F as T,d as t,t as p,u as f,p as E,i as v}from"./app.40bb12c6.js";const S=g({id:"profile",state:()=>({emailText:"please enter your email text here"}),actions:{requestProfileEdit(c){l.fire({title:"Request Profile Edit",html:`<textarea id="profileEdit" name="profileEdit" rows="10" cols="48" placeholder="please enter your email text here"> </textarea>
                        send email to dispatch@dunsterhouse.co.uk using your Outlook`,confirmButtonText:"Copy",showCloseButton:!0,preConfirm:()=>(this.emailText=l.getPopup().querySelector("#profileEdit").value,this.emailText||l.showValidationMessage("Please type your text here"),{EmailText:this.emailText})}).then(a=>{a.isConfirmed&&this.copyEmail()}).catch(function(a){a.name==="AbortError"&&console.log("Request canceled",a.name)})},passwordChange(c,a){l.fire({title:"Change Password",html:`<input type="password" id="oldPwd" class="swal2-input" placeholder="Old Password">
                              <input type="password" id="newPwd" class="swal2-input" placeholder="New password">
                              <input type="password" id="confirmPwd" class="swal2-input" placeholder="Confirm password">`,confirmButtonText:"Confirm",focusConfirm:!1,showCloseButton:!0,preConfirm:()=>{const r=l.getPopup().querySelector("#oldPwd").value,i=l.getPopup().querySelector("#newPwd").value,d=l.getPopup().querySelector("#confirmPwd").value;return c!=w.exports(r)&&l.showValidationMessage("Current password is incorrect."),i||l.showValidationMessage("Please enter new password"),d||l.showValidationMessage("Please enter confirm password"),w.exports(i)=="e018efd594c8118206bce4a4e906d5e5"&&l.showValidationMessage("New password cannot be same as default password ."),i!=d&&l.showValidationMessage("Your password and confirmation password do not match."),w.exports(i)==c&&l.showValidationMessage("Your new password cannot be same as current password"),{newPwd:i,confirmPwd:d}}}).then(r=>{if(r.isConfirmed){console.log("profile data"),console.log(this.controller),this.controller&&this.controller.abort(),this.controller=new AbortController;const i=this.controller.signal;x.post("/api/change-pwd",{admin_user_id:a,password:r.value.newPwd},{signal:i}).then(d=>{d.data!=""?l.fire("Password updated successfully."):l.fire("Changes are not saved","Error","info")})}}).catch(function(r){r.name==="AbortError"&&console.log("Request canceled",r.name)})},async copyEmail(){this.copyToClipboard=this.emailText,await navigator.clipboard.writeText(this.copyToClipboard),swal({title:"Copied",icon:"success"})}}});const n=c=>(E("data-v-ec03e968"),c=c(),v(),c),q=n(()=>t("br",null,null,-1)),B=n(()=>t("br",null,null,-1)),D=n(()=>t("br",null,null,-1)),V=n(()=>t("br",null,null,-1)),k=n(()=>t("br",null,null,-1)),M=n(()=>t("br",null,null,-1)),N=n(()=>t("strong",null,"Name:",-1)),R=n(()=>t("strong",null,"User Name:",-1)),I=n(()=>t("strong",null,"Role:",-1)),F=n(()=>t("strong",null,"Email:",-1)),A=n(()=>t("strong",null,"Department:",-1)),K=n(()=>t("strong",null,"Request Edit",-1)),O=n(()=>t("strong",null,"Change Password",-1)),Y=n(()=>t("br",null,null,-1)),L={__name:"profile",setup(c){const a=y(),r=S();function i(){r.requestProfileEdit()}function d(){r.passwordChange(a.profileData.password,a.admin_user_id)}return(U,W)=>{const o=_("b-col"),u=_("b-row"),h=_("FormKit"),m=_("b-container");return P(),C(T,null,[q,B,D,V,k,M,e(m,{fluid:"",class:"screenLayoutsWidth"},{default:s(()=>[e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[N]),_:1}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[t("span",null,p(f(a).profileData.name),1)]),_:1}),e(o,{cols:"5"})]),_:1}),e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[R]),_:1}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[t("span",null,p(f(a).profileData.user_name),1)]),_:1}),e(o,{cols:"6"})]),_:1}),e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[I]),_:1}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[t("span",null,p(f(a).profileData.role),1)]),_:1}),e(o,{cols:"6"})]),_:1}),e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[F]),_:1}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[t("span",null,p(f(a).profileData.email_id),1)]),_:1}),e(o,{cols:"6"})]),_:1}),e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[A]),_:1}),e(o,{cols:"1",class:"profileText"},{default:s(()=>[t("span",null,p(f(a).profileData.department_name),1)]),_:1}),e(o,{cols:"6"})]),_:1}),e(u,null,{default:s(()=>[e(o,{cols:"4"}),e(o,{cols:"1",class:"profileButtons"},{default:s(()=>[e(h,{type:"button",onClick:i,style:{"background-color":"#0275ff","padding-left":"25px","margin-left":"10px"}},{default:s(()=>[K]),_:1})]),_:1}),e(o,{cols:"1",class:"profileButtons"},{default:s(()=>[e(h,{type:"button",onClick:d,style:{"background-color":"#0275ff","padding-left":"25px","margin-left":"10px"}},{default:s(()=>[O]),_:1})]),_:1}),e(o,{cols:"6"})]),_:1})]),_:1}),Y],64)}}},j=b(L,[["__scopeId","data-v-ec03e968"]]);export{j as default};
