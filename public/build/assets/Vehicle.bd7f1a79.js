import{f,C,h as L,A as T,r as _,o as r,c as V,w as d,a as c,u as n,d as e,e as a,k as v,t as o,F as g,y as h,b}from"./app.40bb12c6.js";import{S,a as x}from"./ScrollToBottom.29655530.js";const A=f("vehicleStore",{state:()=>({searchTerm:"",vehicleEditId:"",vehicles:[],vehicleStatus:1,vehiclestatus:[{index:4,name:"All"},{index:0,name:"Not Active"},{index:1,name:"Active"},{index:2,name:"Inservice"},{index:3,name:"Accident or Repair"}]}),actions:{async allVehicles(){console.log("vehicle data"),console.log(this.controller),this.controller&&this.controller.abort(),this.controller=new AbortController;const s=this.controller.signal,u=C.exports.useLoading().show({color:"#5D2296",loader:"dots"});await L.post("/api/vehicles",{vehicleStatus:this.vehicleStatus},{signal:s}).then(l=>{this.vehicles=l.data.vehicles,setTimeout(()=>{u.hide()},100)}).catch(function(l){setTimeout(()=>{u.hide()},100),l.name==="AbortError"&&console.log("Request canceled",l.name)})}},getters:{filtersearch(){return this.vehicles.filter(s=>s.branchname.toLowerCase().includes(this.searchTerm.toLowerCase())||s.van_number.toLowerCase().includes(this.searchTerm.toLowerCase())||s.start_date.toLowerCase().includes(this.searchTerm.toLowerCase())||s.end_date.toLowerCase().includes(this.searchTerm.toLowerCase())||s.shipping_agent_service_code.toLowerCase().includes(this.searchTerm.toLowerCase())||s.registration_number.toLowerCase().includes(this.searchTerm.toLowerCase())||s.vehicle_type.toLowerCase().includes(this.searchTerm.toLowerCase())||s.target_amount.toLowerCase().includes(this.searchTerm.toLowerCase())||s.delivery_capacity.toString().toLowerCase().includes(this.searchTerm.toLowerCase()))}}}),k=b("Add Vehicle "),N=e("br",null,null,-1),D=e("br",null,null,-1),B={class:"row"},E={class:"col-lg-12 mb-4"},F={class:"card"},R={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},I=e("h3",{class:"m-0 font-weight-bold",style:{color:"#5D2296"}},"Vehicles List",-1),$=["value"],q={class:"table-responsive"},K={class:"table align-items-center table-flush"},U=e("thead",{class:"thead-light"},[e("tr",null,[e("th",null,"Van Number"),e("th",null,"Start Date"),e("th",null,"End Date"),e("th",null,"Branch Name"),e("th",null,"Shipping Agent Service Code"),e("th",null,"Delivery Capacity"),e("th",null,"Target Amount"),e("th",null,"Registration Number"),e("th",null,"Vehicle Type"),e("th",null,"Vehicle Status")])],-1),j={key:0},H={key:1},M={key:2},W={key:3},z=b("Edit"),G=e("div",{class:"card-footer"},null,-1),P={__name:"Vehicle",setup(s){const i=A();return T(()=>{i.allVehicles()}),(u,l)=>{const m=_("router-link"),p=_("FormKit"),y=_("b-container");return r(),V(y,{fluid:"",class:"screenLayoutsWidth"},{default:d(()=>[c(m,{style:{"margin-top":"85px"},to:"/create-vehicle",class:"btn btn-primary"},{default:d(()=>[k]),_:1}),c(S),N,D,c(p,{type:"text",name:"search-vehicle",label:"","suffix-icon":"search","validation-visibility":"live",placeholder:"Search Here",modelValue:n(i).searchTerm,"onUpdate:modelValue":l[0]||(l[0]=t=>n(i).searchTerm=t)},null,8,["modelValue"]),e("div",B,[e("div",E,[e("div",F,[e("div",R,[I,c(p,{type:"select",name:"user-status",modelValue:n(i).vehicleStatus,"onUpdate:modelValue":l[1]||(l[1]=t=>n(i).vehicleStatus=t),onChange:l[2]||(l[2]=t=>n(i).allVehicles())},{default:d(()=>[(r(!0),a(g,null,v(n(i).vehiclestatus,(t,w)=>(r(),a("option",{id:"searchDropdown",key:w,value:t.index},o(t.name),9,$))),128))]),_:1},8,["modelValue"])]),e("div",q,[e("table",K,[U,e("tbody",null,[(r(!0),a(g,null,v(n(i).filtersearch,t=>(r(),a("tr",{key:t.vehicle_id},[e("td",null,o(t.van_number),1),e("td",null,o(t.start_date),1),e("td",null,o(t.end_date),1),e("td",null,o(t.branchname),1),e("td",null,o(t.shipping_agent_service_code),1),e("td",null,o(t.delivery_capacity),1),e("td",null,o(t.target_amount),1),e("td",null,o(t.registration_number),1),e("td",null,o(t.vehicle_type),1),e("td",null,[t.vehicle_status==0?(r(),a("span",j,"Not Active")):h("",!0),t.vehicle_status==1?(r(),a("span",H,"Active")):h("",!0),t.vehicle_status==2?(r(),a("span",M,"Inservice")):h("",!0),t.vehicle_status==3?(r(),a("span",W,"Accident or Repair")):h("",!0)]),e("td",null,[c(m,{to:{name:"edit-vehicle",query:{id:t.vehicle_id}},class:"btn btn-sm btn-primary"},{default:d(()=>[z]),_:2},1032,["to"])])]))),128))])])]),G])])]),c(x)]),_:1})}}};export{P as default};
