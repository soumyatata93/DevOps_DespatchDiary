import{f as V,C as f,h as g,g as u,D as A,_ as F,E,A as v,r as h,o as D,c as C,w as o,d as p,a as e,u as r,b as T,p as U,i as q}from"./app.40bb12c6.js";const S=V("editBranch",{state:()=>({id:"",branchForm:{branch_location:"",branch_code:"",shipping_agent_code:"",branch_postcode:"",latitude:"",longitude:""}}),actions:{async updateBranchDetails(i){this.controller&&this.controller.abort(),this.controller=new AbortController;const t=this.controller.signal,l=f.exports.useLoading().show({color:"#5D2296",loader:"dots"});g.post("/api/update-branch",{branchForm:this.branchForm,branchId:i},{signal:t}).then(({data:c})=>{c.error==""?(setTimeout(()=>{l.hide()},100),u.fire({title:"Updated sucessfully!",icon:"success"})):(setTimeout(()=>{l.hide()},100),u.fire({title:"Record not saved",text:"Error in Database",icon:"warning"}))}).catch(function(c){setTimeout(()=>{l.hide()},100),c.name==="AbortError"&&console.log("Request canceled",c.name)})},deleteBranch(i){u.fire({title:"Delete this record?",showDenyButton:!0,confirmButtonText:"Yes",denyButtonText:"No",text:"Are you sure? Once deleted you won't be able to recover this!",icon:"warning"}).then(t=>{if(t.isConfirmed){this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal;const l=f.exports.useLoading().show({color:"#5D2296",loader:"dots"});g.post("/api/delete-branch",{branchId:i}).then(({data:c})=>{c.error==""?(setTimeout(()=>{l.hide()},100),u.fire({title:"Branch record deleted sucessfully!",icon:"success"}).then(B=>{B.isConfirmed&&A.push({name:"branch"})})):(setTimeout(()=>{l.hide()},100),u.fire({title:"Record not deleted",text:"Error in Database",icon:"warning"}))})}else u.fire("Your Branch record is not Deleted, its safe!")}).catch(function(t){setTimeout(()=>{loader.hide()},100),t.name==="AbortError"&&console.log("Request canceled",t.name)})},async EditBranch(i){const m=f.exports.useLoading().show({color:"#5D2296",loader:"dots"});await g.post("/api/edit-branch",{branchId:i}).then(({data:l})=>{setTimeout(()=>{m.hide()},100),l.error==""?this.branchForm=l.result:u.fire({title:"Unable to fetch record",text:"Error in Database",icon:"warning"})})}}});const _=i=>(U("data-v-42ab5306"),i=i(),q(),i),I=_(()=>p("br",null,null,-1)),N=_(()=>p("span",{class:"arrow_styles material-icons"},"arrow_back",-1)),$=_(()=>p("h1",{class:"text-center"}," Branch Details Update",-1)),z=_(()=>p("hr",null,null,-1)),Z=T("Delete "),k={__name:"EditBranch",setup(i){const t=S();let l=E().query.id;const c=()=>{t.updateBranchDetails(l)};return v(()=>{t.EditBranch(l)}),(B,a)=>{const y=h("router-link"),n=h("b-col"),b=h("b-row"),d=h("FormKit"),x=h("b-form-row"),w=h("b-container");return D(),C(w,{fluid:"",class:"screenLayoutsWidth2"},{default:o(()=>[p("div",null,[I,e(b,{style:{"margin-top":"55px"}},{default:o(()=>[e(n,{cols:"4"},{default:o(()=>[e(y,{to:"/branch",class:"btn btn-primary"},{default:o(()=>[N]),_:1})]),_:1}),e(n,{cols:"3",class:"headingAdjust"},{default:o(()=>[$]),_:1}),e(n,{cols:"5"})]),_:1})]),z,e(x,{class:"editUserForm"},{default:o(()=>[e(d,{type:"form",onSubmit:c},{default:o(()=>[e(b,null,{default:o(()=>[e(n,{cols:"2"}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"branch-name",label:"Branch Name",help:"Which town/city this branch is located ",validation:"required|length:0,35",placeholder:"Enter Branch Name",modelValue:r(t).branchForm.branch_location,"onUpdate:modelValue":a[0]||(a[0]=s=>r(t).branchForm.branch_location=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"branch-code",label:"Branch Code",help:"Branch code as per NAV",validation:"required|length:0,35",placeholder:"Enter Branch Code",modelValue:r(t).branchForm.branch_code,"onUpdate:modelValue":a[1]||(a[1]=s=>r(t).branchForm.branch_code=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"})]),_:1}),e(b,null,{default:o(()=>[e(n,{cols:"2"}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"shipping-agent-code",label:"Shipping Agent Code",help:"Shipping Agent code to be sent to NAV",validation:"required|length:0,35",placeholder:"Enter Shipping Agent Code",modelValue:r(t).branchForm.shipping_agent_code,"onUpdate:modelValue":a[2]||(a[2]=s=>r(t).branchForm.shipping_agent_code=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"branch-postcode",label:"Branch Post code",help:"Post code of this branch",validation:[["required"],["matches",/([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9][A-Za-z]?))))\s?[0-9][A-Za-z]{2})$/]],placeholder:"Enter Branch Post code",modelValue:r(t).branchForm.branch_postcode,"onUpdate:modelValue":a[3]||(a[3]=s=>r(t).branchForm.branch_postcode=s)},null,8,["validation","modelValue"])]),_:1}),e(n,{cols:"2"})]),_:1}),e(b,null,{default:o(()=>[e(n,{cols:"2"}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"latitude",label:"latitude",help:"latitude for this branch",validation:"required|number",placeholder:"Enter latitude",modelValue:r(t).branchForm.latitude,"onUpdate:modelValue":a[4]||(a[4]=s=>r(t).branchForm.latitude=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:o(()=>[e(d,{type:"text",name:"longitude",label:"longitude",help:"longitude for this branch",validation:"required|number",placeholder:"Enter longitude",modelValue:r(t).branchForm.longitude,"onUpdate:modelValue":a[5]||(a[5]=s=>r(t).branchForm.longitude=s)},null,8,["modelValue"])]),_:1}),e(n,{cols:"2"})]),_:1})]),_:1}),e(d,{type:"button",onClick:a[6]||(a[6]=s=>r(t).deleteBranch(r(l)))},{default:o(()=>[Z]),_:1})]),_:1})]),_:1})}}},L=F(k,[["__scopeId","data-v-42ab5306"]]);export{L as default};
